# Comm Fullstack Architecture Document

## Table of Contents

- [Comm Fullstack Architecture Document](#table-of-contents)
  - [Introduction](./introduction.md)
    - [Starter Template or Existing Project](./introduction.md#starter-template-or-existing-project)
    - [Change Log](./introduction.md#change-log)
  - [High Level Architecture](./high-level-architecture.md)
    - [Technical Summary](./high-level-architecture.md#technical-summary)
    - [Platform and Infrastructure Choice](./high-level-architecture.md#platform-and-infrastructure-choice)
    - [Repository Structure](./high-level-architecture.md#repository-structure)
    - [High Level Architecture Diagram](./high-level-architecture.md#high-level-architecture-diagram)
    - [Architectural Patterns](./high-level-architecture.md#architectural-patterns)
  - [Tech Stack](./tech-stack.md)
    - [Technology Stack Table](./tech-stack.md#technology-stack-table)
  - [Data Models](./data-models.md)
    - [User Model](./data-models.md#user-model)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Relationships](./data-models.md#relationships)
    - [Conversation Model](./data-models.md#conversation-model)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Relationships](./data-models.md#relationships)
    - [Message Model](./data-models.md#message-model)
      - [TypeScript Interface](./data-models.md#typescript-interface)
      - [Relationships](./data-models.md#relationships)
    - [Data Model Relationships Diagram](./data-models.md#data-model-relationships-diagram)
  - [Database Schemas](./database-schemas.md)
    - [Firestore Schema](./database-schemas.md#firestore-schema)
    - [SQLite Schema](./database-schemas.md#sqlite-schema)
  - [API Specification](./api-specification.md)
    - [Firebase SDK Operations](./api-specification.md#firebase-sdk-operations)
  - [Components](./components.md)
    - [Authentication Service](./components.md#authentication-service)
    - [Messaging Service](./components.md#messaging-service)
    - [Sync Engine](./components.md#sync-engine)
    - [SQLite Service](./components.md#sqlite-service)
    - [Notification Service](./components.md#notification-service)
    - [Presence Service](./components.md#presence-service)
  - [Frontend Architecture](./frontend-architecture.md)
    - [Project Folder Structure](./frontend-architecture.md#project-folder-structure)
  - [State Management Strategy](./state-management-strategy.md)
    - [Approach: React Context + Hooks (No Redux/Zustand for MVP)](./state-management-strategy.md#approach-react-context-hooks-no-reduxzustand-for-mvp)
    - [Context Providers](./state-management-strategy.md#context-providers)
  - [Real-Time Sync Architecture](./real-time-sync-architecture.md)
    - [Sync Flow](./real-time-sync-architecture.md#sync-flow)
    - [Offline Queueing](./real-time-sync-architecture.md#offline-queueing)
  - [Security Implementation](./security-implementation.md)
    - [Firebase Security Rules](./security-implementation.md#firebase-security-rules)
    - [Client-Side Security](./security-implementation.md#client-side-security)
  - [Performance Optimization Strategies](./performance-optimization-strategies.md)
    - [1. FlatList Virtualization](./performance-optimization-strategies.md#1-flatlist-virtualization)
    - [2. Message Pagination](./performance-optimization-strategies.md#2-message-pagination)
    - [3. Firestore Query Optimization](./performance-optimization-strategies.md#3-firestore-query-optimization)
    - [4. Component Memoization](./performance-optimization-strategies.md#4-component-memoization)
    - [5. Debouncing Presence Updates](./performance-optimization-strategies.md#5-debouncing-presence-updates)
    - [6. SQLite Indexes](./performance-optimization-strategies.md#6-sqlite-indexes)
    - [7. Image Loading (Post-MVP)](./performance-optimization-strategies.md#7-image-loading-post-mvp)
  - [Error Handling & Retry Logic](./error-handling-retry-logic.md)
    - [Error Categories](./error-handling-retry-logic.md#error-categories)
    - [Retry Logic Implementation](./error-handling-retry-logic.md#retry-logic-implementation)
  - [Testing Strategy](./testing-strategy.md)
    - [Manual Testing (MVP Priority)](./testing-strategy.md#manual-testing-mvp-priority)
    - [Unit Testing (Recommended)](./testing-strategy.md#unit-testing-recommended)
    - [Integration Testing (Post-MVP)](./testing-strategy.md#integration-testing-post-mvp)
  - [Deployment Strategy](./deployment-strategy.md)
    - [MVP Deployment: Expo Go Only](./deployment-strategy.md#mvp-deployment-expo-go-only)
    - [Post-MVP Deployment: Native Builds (Future)](./deployment-strategy.md#post-mvp-deployment-native-builds-future)
  - [Monitoring & Observability (Post-MVP)](./monitoring-observability-post-mvp.md)
    - [Crash Reporting](./monitoring-observability-post-mvp.md#crash-reporting)
    - [Performance Monitoring](./monitoring-observability-post-mvp.md#performance-monitoring)
    - [Analytics](./monitoring-observability-post-mvp.md#analytics)
    - [Logging](./monitoring-observability-post-mvp.md#logging)
  - [Risk Mitigation](./risk-mitigation.md)
    - [Risk 1: Firestore Costs](./risk-mitigation.md#risk-1-firestore-costs)
    - [Risk 2: Sync Conflicts](./risk-mitigation.md#risk-2-sync-conflicts)
    - [Risk 3: SQLite Performance with Large History](./risk-mitigation.md#risk-3-sqlite-performance-with-large-history)
    - [Risk 4: Expo Go Limitations](./risk-mitigation.md#risk-4-expo-go-limitations)
  - [Next Steps & Developer Handoff](./next-steps-developer-handoff.md)
    - [Epic 1: Foundation & Authentication](./next-steps-developer-handoff.md#epic-1-foundation-authentication)
    - [Epic 2: One-on-One Messaging Core](./next-steps-developer-handoff.md#epic-2-one-on-one-messaging-core)
    - [Epic 3: Group Chat](./next-steps-developer-handoff.md#epic-3-group-chat)
    - [Epic 4: Polish & Deployment](./next-steps-developer-handoff.md#epic-4-polish-deployment)
    - [Key Implementation Priorities](./next-steps-developer-handoff.md#key-implementation-priorities)
    - [Architectural Decisions to Validate During Implementation](./next-steps-developer-handoff.md#architectural-decisions-to-validate-during-implementation)
  - [Appendix: Technology Research](./appendix-technology-research.md)
    - [Firebase + Expo Integration](./appendix-technology-research.md#firebase-expo-integration)
    - [Expo SQLite](./appendix-technology-research.md#expo-sqlite)
    - [Firestore for Messaging](./appendix-technology-research.md#firestore-for-messaging)
